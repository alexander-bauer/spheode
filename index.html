<!doctype html>
<html class="no-js">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />
<link rel="index" title="Index" href="genindex.html" /><link rel="search" title="Search" href="search.html" />

    <meta name="generator" content="sphinx-4.3.2, furo 2022.01.02"/>
        <title>Spheode v0.1-1-gac92287 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo.css?digest=df49af52631e7917044a9c21a57f7b83170a6dd0" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/tabs.css" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo-extensions.css?digest=fade93df149f7c5fedb3ff897f799dc7d283b420" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  body[data-theme="dark"] {
    --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
  }
  @media (prefers-color-scheme: dark) {
    body:not([data-theme="light"]) {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
  }
</style></head>
  <body>
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" />
      <line x1="4" y1="6" x2="20" y2="6" />
      <line x1="10" y1="12" x2="20" y2="12" />
      <line x1="6" y1="18" x2="20" y2="18" />
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="#"><div class="brand">Spheode v0.1-1-gac92287 documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="#">
  
  
  <span class="sidebar-brand-text">Spheode v0.1-1-gac92287 documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="search.html" role="search">
  <input class="sidebar-search" placeholder=Search name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  
</div>
</div>
      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <div class="content-icon-container">
          <div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="spheode">
<h1>Spheode<a class="headerlink" href="#spheode" title="Permalink to this headline">¶</a></h1>
<p>Spheode is an opinionated, open-source documentation tool built atop Sphinx.
Source documentation are typically living reStructuredText documentation
intermingled with code. From those sources, Spheode renders HTML documentation
using Sphinx, either repeatably on-the-fly during authorship, or during a CI
pipeline.</p>
<section id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<p>Spheode has two modes: <code class="docutils literal notranslate"><span class="pre">autobuild</span></code> and <code class="docutils literal notranslate"><span class="pre">export</span></code>. When invoked without an
argument, <code class="docutils literal notranslate"><span class="pre">autobuild</span></code> is the default mode. In both modes, the <em>root</em> of the
source repository must be mounted to <code class="docutils literal notranslate"><span class="pre">/repo</span></code>.</p>
<section id="autobuild">
<h3><code class="docutils literal notranslate"><span class="pre">autobuild</span></code><a class="headerlink" href="#autobuild" title="Permalink to this headline">¶</a></h3>
<p>In <code class="docutils literal notranslate"><span class="pre">autobuild</span></code> mode, Spheode invokes <code class="docutils literal notranslate"><span class="pre">sphinx-autobuild</span></code>, which
automatically rebuilds the HTML documentation on changes to the source
directory, and serves it on port 8000 in the container. This is the typical
mode for developers to use while authoring documentation.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ docker run -v <span class="s2">"</span><span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span><span class="s2">:/repo:ro"</span> -p <span class="s2">"8000:8000"</span> alexanderbauer0/spheode:latest
</pre></div>
</div>
<p>An easy way to use this is to set an alias in your <code class="docutils literal notranslate"><span class="pre">.bashrc</span></code>.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">alias</span> <span class="nv">spheode</span><span class="o">=</span><span class="s1">'docker run -v "$(pwd):/repo:ro" -p "8000:8000" alexanderbauer0/spheode:latest'</span>
</pre></div>
</div>
</section>
<section id="export">
<h3><code class="docutils literal notranslate"><span class="pre">export</span></code><a class="headerlink" href="#export" title="Permalink to this headline">¶</a></h3>
<p>In <code class="docutils literal notranslate"><span class="pre">export</span></code> mode, Spheode invokes <code class="docutils literal notranslate"><span class="pre">sphinx-build</span></code> once and delivers the
resulting HTML documentation to the volume mounted at <code class="docutils literal notranslate"><span class="pre">/export</span></code>. This might
be used in a CI context to build static documentation for new versions of the
source, such as for GitHub or GitLab Pages.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ docker run -v <span class="s2">"</span><span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span><span class="s2">:/repo:ro"</span> -v <span class="s2">"</span><span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span><span class="s2">/export:/export"</span> alexanderbauer0/spheode:latest <span class="nb">export</span>
</pre></div>
</div>
<p>Additional arguments, such as to <code class="docutils literal notranslate"><span class="pre">chown</span></code> the export to another user, may be
passed just by appending them.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ docker run -v <span class="s2">"</span><span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span><span class="s2">:/repo:ro"</span> -v <span class="s2">"</span><span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span><span class="s2">/export:/export"</span> alexanderbauer0/spheode:latest <span class="nb">export</span> --chown <span class="m">1000</span>:1000
</pre></div>
</div>
</section>
<section id="debugging">
<h3>Debugging<a class="headerlink" href="#debugging" title="Permalink to this headline">¶</a></h3>
<section id="entering-the-container-interactively">
<h4>Entering the Container Interactively<a class="headerlink" href="#entering-the-container-interactively" title="Permalink to this headline">¶</a></h4>
<p>Typically Spheode should not be entered interactively, but for debugging
purposes, it may be entered by overriding the container <code class="docutils literal notranslate"><span class="pre">entrypoint</span></code>, like</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ docker run -v <span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span>:/repo --entrypoint sh -it alexanderbauer0/spheode:latest
</pre></div>
</div>
</section>
</section>
</section>
<section id="details">
<h2>Details<a class="headerlink" href="#details" title="Permalink to this headline">¶</a></h2>
<section id="sources">
<h3>Sources<a class="headerlink" href="#sources" title="Permalink to this headline">¶</a></h3>
<p>Documentation sources are reStructuredText files in the <code class="docutils literal notranslate"><span class="pre">docs</span></code> subdirectory
of the root of the repository. The root of the documentation is <code class="docutils literal notranslate"><span class="pre">index.rst</span></code>.
Optionally, <code class="docutils literal notranslate"><span class="pre">conf.py</span></code> can be provided to set Sphinx configuration options;
see <cite>index:Sphinx Configuration</cite>.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>.                   &lt;-- repository root
└── docs            &lt;-- documentation root
    ├── conf.py     &lt;-- optional user-provided configuration
    └── index.rst   &lt;-- documentation index or entrypoint
</pre></div>
</div>
<p>In addition to regular reStructuredText sources, Spheode includes the
<code class="docutils literal notranslate"><span class="pre">sphinxcontrib-cmtinc</span></code> plugin, which adds the capability to ingest source files</p>
<p>That is, plaintext sources marked up with reStructuredText living either
alongside in separate files or directly embedded within code sources.</p>
<section id="sphinx-configuration">
<h4>Sphinx Configuration<a class="headerlink" href="#sphinx-configuration" title="Permalink to this headline">¶</a></h4>
<p>Optionally <code class="docutils literal notranslate"><span class="pre">conf.py</span></code> can be provided in the root of the <code class="docutils literal notranslate"><span class="pre">docs</span></code> directory in
order to set Sphinx configuration options. Many options are set automatically
by Spheode, but project-specific options (such as <code class="docutils literal notranslate"><span class="pre">project</span></code>, <code class="docutils literal notranslate"><span class="pre">author</span></code>, and
<code class="docutils literal notranslate"><span class="pre">copyright</span></code>) may be set. Spheode provides some functions for convenience,
such as <code class="docutils literal notranslate"><span class="pre">copyright_since(author,</span> <span class="pre">start_year,</span> <span class="pre">end_year=current_year)</span></code></p>
<p>For example, here is the <code class="docutils literal notranslate"><span class="pre">conf.py</span></code> included with this project.</p>
<div class="literal-block-wrapper docutils container" id="id1">
<div class="code-block-caption"><span class="caption-text">conf.py</span><a class="headerlink" href="#id1" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">project</span> <span class="o">=</span> <span class="s2">"Spheode"</span>
<span class="n">author</span> <span class="o">=</span> <span class="s2">"Alexander Bauer"</span>
<span class="n">copyright</span> <span class="o">=</span> <span class="n">copyright_since</span><span class="p">(</span><span class="n">author</span><span class="p">,</span> <span class="s1">'2022'</span><span class="p">)</span>
</pre></div>
</div>
</div>
</section>
<section id="prolog-epilog">
<h4>Prolog / Epilog<a class="headerlink" href="#prolog-epilog" title="Permalink to this headline">¶</a></h4>
<p>Files named <code class="docutils literal notranslate"><span class="pre">prolog.rst</span></code> or <code class="docutils literal notranslate"><span class="pre">epilog.rst</span></code> in the root of the <code class="docutils literal notranslate"><span class="pre">docs</span></code>
directory are set as <code class="docutils literal notranslate"><span class="pre">rst_prolog</span></code> or <code class="docutils literal notranslate"><span class="pre">rst_epilog</span></code> in the Sphinx
configuration.  Those configuration options do not need to be set. To extend
the content of either programatically, simply override <code class="docutils literal notranslate"><span class="pre">rst_prolog</span></code> or
<code class="docutils literal notranslate"><span class="pre">rst_epilog</span></code> in the custom <code class="docutils literal notranslate"><span class="pre">conf.py</span></code>. The content as set by Spheode is
available as <code class="docutils literal notranslate"><span class="pre">default_rst_prolog</span></code> and <code class="docutils literal notranslate"><span class="pre">default_rst_epilog</span></code>.</p>
</section>
<section id="documentation-in-source-code">
<h4>Documentation in Source Code<a class="headerlink" href="#documentation-in-source-code" title="Permalink to this headline">¶</a></h4>
<p>Spheode includes the <code class="docutils literal notranslate"><span class="pre">sphinxcontrib-cmtinc</span></code> plugin, which provides a
directive to include Sphinx documentation embedded within other files, such as
source code. For example, here is source code and a directive for including it.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--0-input--1" name="tab-set--0" type="radio"/><label class="tab-label" for="tab-set--0-input--1">Source</label><div class="tab-content docutils container">
<div class="literal-block-wrapper docutils container" id="id2">
<div class="code-block-caption"><span class="caption-text">Sphinx directive</span><a class="headerlink" href="#id2" title="Permalink to this code">¶</a></div>
<div class="highlight-RST notranslate"><div class="highlight"><pre><span></span><span class="p">..</span> <span class="ow">include-comment</span><span class="p">::</span> example.py
   <span class="nc">:style:</span> hash
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id3">
<div class="code-block-caption"><span class="caption-text">example.py</span><a class="headerlink" href="#id3" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python3</span>

<span class="c1">#:</span>
<span class="c1"># This is a comment in ``example.py`` which will be included in the</span>
<span class="c1"># documentation as native reStructuredText. It can include exemplar code</span>
<span class="c1"># blocks, like this ::</span>
<span class="c1">#</span>
<span class="c1">#    &gt;&gt;&gt; multiply(2, 4)</span>
<span class="c1">#    8</span>
<span class="c1">#</span>
<span class="c1"># It is also easy to include source code directly from the file, rather than</span>
<span class="c1"># needing to duplicate it, and risk drift. For example, this is the actual</span>
<span class="c1"># implementation of the ``multiply()`` function, included directly into the</span>
<span class="c1"># documentation with great control of the surrounding content, and no</span>
<span class="c1"># duplication of code. ::</span>
<span class="c1">#. \codepara</span>
<span class="k">def</span> <span class="nf">multiply</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
    <span class="sd">"""Multiply two numbers."""</span>
    <span class="k">return</span> <span class="n">a</span> <span class="o">*</span> <span class="n">b</span>

<span class="c1"># Not every comment needs to be decorated with the ``#:`` and ``#.`` markers.</span>
<span class="c1"># Ones that are not are simply ignored.</span>
</pre></div>
</div>
</div>
</div>
<input class="tab-input" id="tab-set--0-input--2" name="tab-set--0" type="radio"/><label class="tab-label" for="tab-set--0-input--2">Result</label><div class="tab-content docutils container">
<p>This is a comment in <code class="docutils literal notranslate"><span class="pre">example.py</span></code> which will be included in the
documentation as native reStructuredText. It can include exemplar code
blocks, like this</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt;&gt;&gt; multiply<span class="o">(</span><span class="m">2</span>, <span class="m">4</span><span class="o">)</span>
<span class="m">8</span>
</pre></div>
</div>
<p>It is also easy to include source code directly from the file, rather than
needing to duplicate it, and risk drift. For example, this is the actual
implementation of the <code class="docutils literal notranslate"><span class="pre">multiply()</span></code> function, included directly into the
documentation with great control of the surrounding content, and no
duplication of code.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>def multiply<span class="o">(</span>a, b<span class="o">)</span>:
    <span class="s2">"""Multiply two numbers."""</span>
    <span class="k">return</span> a * b
</pre></div>
</div>
</div>
</div>
<p>Another less contrived example of this feature in action is for documenting
Ansible playbooks and roles.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--1-input--1" name="tab-set--1" type="radio"/><label class="tab-label" for="tab-set--1-input--1">Source</label><div class="tab-content docutils container">
<div class="literal-block-wrapper docutils container" id="id4">
<div class="code-block-caption"><span class="caption-text">Sphinx directive</span><a class="headerlink" href="#id4" title="Permalink to this code">¶</a></div>
<div class="highlight-RST notranslate"><div class="highlight"><pre><span></span><span class="p">..</span> <span class="ow">include-comment</span><span class="p">::</span> example-playbook.yml
   <span class="nc">:style:</span> hash
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id5">
<div class="code-block-caption"><span class="caption-text">example-playbook.yml</span><a class="headerlink" href="#id5" title="Permalink to this code">¶</a></div>
<div class="highlight-yaml+jinja notranslate"><div class="highlight"><pre><span></span><span class="nn">---</span><span class="w"></span>
<span class="c1">#:</span><span class="w"></span>
<span class="c1"># ..</span><span class="w"></span>
<span class="c1">#    In a different context, this could be a section heading instead of a</span><span class="w"></span>
<span class="c1">#    description list.</span><span class="w"></span>
<span class="c1">#</span><span class="w"></span>
<span class="c1"># ``example-playbook.yml``</span><span class="w"></span>
<span class="c1">#   This text is at the header of an Ansible playbook, the purpose of which is to</span><span class="w"></span>
<span class="c1">#   ping all defined hosts twice, and to be an example. Although this is just a</span><span class="w"></span>
<span class="c1">#   paragaraph, reStructuredText here could include other files, or a mermaid-js</span><span class="w"></span>
<span class="c1">#   diagram.</span><span class="w"></span>
<span class="c1">#</span><span class="w"></span>
<span class="c1">#   The playbook performs exactly these tasks.</span><span class="w"></span>
<span class="c1">#.</span><span class="w"></span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Ping all hosts</span><span class="w"></span>
<span class="w">  </span><span class="nt">hosts</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">all</span><span class="w"></span>
<span class="w">  </span><span class="nt">tasks</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="c1">#:</span><span class="w"></span>
<span class="w">    </span><span class="c1">#   ..</span><span class="w"></span>
<span class="w">    </span><span class="c1">#      Inline Sphinx comment inside a Python comment here -- although it</span><span class="w"></span>
<span class="w">    </span><span class="c1">#      looks strange, ``#.`` is also the marker for an auto-numbered Sphinx</span><span class="w"></span>
<span class="w">    </span><span class="c1">#      bullet list. It works great for numbering tasks.</span><span class="w"></span>
<span class="w">    </span><span class="c1">#</span><span class="w"></span>
<span class="w">    </span><span class="c1">#      We have to pay very close attention to the number of spaces when using</span><span class="w"></span>
<span class="w">    </span><span class="c1">#      code blocks, and the sphinxcontrib-cmtinc directives like</span><span class="w"></span>
<span class="w">    </span><span class="c1">#      ``codepara``.</span><span class="w"></span>
<span class="w">    </span><span class="c1">#</span><span class="w"></span>
<span class="w">    </span><span class="c1">#   #. Ping all the hosts in parallel. For posterity, we also include the implementation of the task. ::</span><span class="w"></span>
<span class="w">    </span><span class="c1">#.      \codepara</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Ping once, to check</span><span class="w"></span>
<span class="w">      </span><span class="nt">ping</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span><span class="w"></span>

<span class="w">    </span><span class="c1">#:</span><span class="w"></span>
<span class="w">    </span><span class="c1">#   #. Ping all the hosts in parallel again. We're not including the implementation on this one.</span><span class="w"></span>
<span class="w">    </span><span class="c1">#.</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Ping again, just to be sure</span><span class="w"></span>
<span class="w">      </span><span class="nt">ping</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>
<input class="tab-input" id="tab-set--1-input--2" name="tab-set--1" type="radio"/><label class="tab-label" for="tab-set--1-input--2">Result</label><div class="tab-content docutils container">
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">example-playbook.yml</span></code></dt><dd><p>This text is at the header of an Ansible playbook, the purpose of which is to
ping all defined hosts twice, and to be an example. Although this is just a
paragaraph, reStructuredText here could include other files, or a mermaid-js
diagram.</p>
<p>The playbook performs exactly these tasks.</p>
<ol class="arabic">
<li><p>Ping all the hosts in parallel. For posterity, we also include the implementation of the task.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>- name: Ping once, to check
  ping: <span class="o">{}</span>
</pre></div>
</div>
</li>
<li><p>Ping all the hosts in parallel again. We’re not including the implementation on this one.</p></li>
</ol>
</dd>
</dl>
</div>
</div>
</section>
<section id="convenience-functions">
<h4>Convenience Functions<a class="headerlink" href="#convenience-functions" title="Permalink to this headline">¶</a></h4>
<p>These functions are available in the local namespace of the custom <code class="docutils literal notranslate"><span class="pre">conf.py</span></code>.
They do not need to be imported to be used.</p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">copyright_since</span></code></dt><dd><p>This function, given an author and year, produces copyright statements in the form expected by Sphinx.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">copyright_since</span><span class="p">(</span><span class="s2">"John Doe"</span><span class="p">,</span> <span class="s2">"2002"</span><span class="p">)</span>
<span class="go">"2002-2022, John doe"</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">copyright_since</span><span class="p">(</span><span class="s2">"John Doe"</span><span class="p">,</span> <span class="s2">"2002"</span><span class="p">,</span> <span class="s2">"2010"</span><span class="p">)</span>
<span class="go">"2002-2020, John doe"</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">copyright_since</span><span class="p">(</span><span class="s2">"John Doe"</span><span class="p">,</span> <span class="s2">"2022"</span><span class="p">)</span>
<span class="go">"2022, John doe"</span>
</pre></div>
</div>
</dd>
</dl>
</section>
</section>
</section>
<section id="internals">
<h2>Internals<a class="headerlink" href="#internals" title="Permalink to this headline">¶</a></h2>
<p>Spheode is a container. It may be built and run using Docker or Podman. Its
entrypoint is the script <code class="docutils literal notranslate"><span class="pre">spheode</span></code>, which invokes Sphinx in a structured way.</p>
<section id="configuration">
<h3>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h3>
<p>Spheode provides its own <code class="docutils literal notranslate"><span class="pre">conf.py</span></code> for use by Sphinx which sets many default
options. These can be extended by a <code class="docutils literal notranslate"><span class="pre">conf.py</span></code> in the user <code class="docutils literal notranslate"><span class="pre">docs</span></code> source.
Mechanically, Spheode assembles a temporary <code class="docutils literal notranslate"><span class="pre">conf</span></code> directory and supplies it
to Sphinx using the <code class="docutils literal notranslate"><span class="pre">-c</span></code> option. This directory contains a <code class="docutils literal notranslate"><span class="pre">conf.py</span></code>, which
is the entrypoint to the Sphinx configuration. This file reads and then runs
<code class="docutils literal notranslate"><span class="pre">exec()</span></code> on <code class="docutils literal notranslate"><span class="pre">spheode.py</span></code>, which sets default options, and then
<code class="docutils literal notranslate"><span class="pre">userconf.py</span></code>, which is a symlink to the user-provided <code class="docutils literal notranslate"><span class="pre">conf.py</span></code>.</p>
</section>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          
          
        </div>

        <div class="related-information">
              Copyright &#169; 2022, Alexander Bauer |
          Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
          <a href="https://github.com/pradyunsg/furo">Furo theme</a>.
            | <a class="muted-link" href="_sources/index.rst.txt"
               rel="nofollow">
              Show Source
            </a>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            Contents
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Spheode</a><ul>
<li><a class="reference internal" href="#usage">Usage</a><ul>
<li><a class="reference internal" href="#autobuild"><code class="docutils literal notranslate"><span class="pre">autobuild</span></code></a></li>
<li><a class="reference internal" href="#export"><code class="docutils literal notranslate"><span class="pre">export</span></code></a></li>
<li><a class="reference internal" href="#debugging">Debugging</a><ul>
<li><a class="reference internal" href="#entering-the-container-interactively">Entering the Container Interactively</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#details">Details</a><ul>
<li><a class="reference internal" href="#sources">Sources</a><ul>
<li><a class="reference internal" href="#sphinx-configuration">Sphinx Configuration</a></li>
<li><a class="reference internal" href="#prolog-epilog">Prolog / Epilog</a></li>
<li><a class="reference internal" href="#documentation-in-source-code">Documentation in Source Code</a></li>
<li><a class="reference internal" href="#convenience-functions">Convenience Functions</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#internals">Internals</a><ul>
<li><a class="reference internal" href="#configuration">Configuration</a></li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/scripts/furo.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script src="_static/tabs.js"></script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
    <script>mermaid.initialize({startOnLoad:true});</script>
    </body>
</html>